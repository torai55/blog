<!doctype html><html lang=zh-tw dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="zh-tw"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>用樹莓派打造環境監測器[03]：程式讀取感測器讀數、通知功能 &#183; Torai's Garden</title><meta name=title content="用樹莓派打造環境監測器[03]：程式讀取感測器讀數、通知功能 &#183; Torai's Garden"><meta name=description content="以 Python 讀取溫濕度感測器、螢幕輸出、手機通知"><meta name=keywords content="Raspberry Pi,"><link rel=canonical href=https://torai55.github.io/blog/posts/computer-science/terrarium-sensor-03/><link type=text/css rel=stylesheet href=/blog/css/main.bundle.min.e16d34b7ab89d7676e2dcf77de807591345bd78eeb8f0a632af3b9a006375556c0dd4a9b3437330a07fb9666b22756286af31ec7c440eb37c33f9f8fad81aa42.css integrity="sha512-4W00t6uJ12duLc933oB1kTRb147rjwpjKvO5oAY3VVbA3UqbNDczCgf7lmayJ1YoavMex8RA6zfDP5+PrYGqQg=="><script type=text/javascript src=/blog/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
<script defer type=text/javascript id=script-bundle src=/blog/js/main.bundle.min.41e474f5d66052b313c33b8f56008afac498015b7472d0f2ab78e22c187405fdff125b6735973309e4743b6924ca8c575db297f464c42da8e30ef9daed3b050c.js integrity="sha512-QeR09dZgUrMTwzuPVgCK+sSYAVt0ctDyq3jiLBh0Bf3/EltnNZczCeR0O2kkyoxXXbKX9GTELajjDvna7TsFDA==" data-copy data-copied></script>
<script src=/blog/js/zoom.min.js></script>
<link rel=apple-touch-icon sizes=180x180 href=/blog/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/blog/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/blog/favicon-16x16.png><link rel=manifest href=/blog/site.webmanifest><meta property="og:title" content="用樹莓派打造環境監測器[03]：程式讀取感測器讀數、通知功能"><meta property="og:description" content="以 Python 讀取溫濕度感測器、螢幕輸出、手機通知"><meta property="og:type" content="article"><meta property="og:url" content="https://torai55.github.io/blog/posts/computer-science/terrarium-sensor-03/"><meta property="og:image" content="https://torai55.github.io/blog/posts/computer-science/terrarium-sensor-03/featured.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-11T16:45:10+08:00"><meta property="article:modified_time" content="2023-12-11T16:45:10+08:00"><meta property="og:see_also" content="https://torai55.github.io/blog/posts/computer-science/terrarium-sensor-04/"><meta property="og:see_also" content="https://torai55.github.io/blog/posts/computer-science/terrarium-sensor-02/"><meta property="og:see_also" content="https://torai55.github.io/blog/posts/computer-science/terrarium-sensor-01/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://torai55.github.io/blog/posts/computer-science/terrarium-sensor-03/featured.jpg"><meta name=twitter:title content="用樹莓派打造環境監測器[03]：程式讀取感測器讀數、通知功能"><meta name=twitter:description content="以 Python 讀取溫濕度感測器、螢幕輸出、手機通知"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"用樹莓派打造環境監測器[03]：程式讀取感測器讀數、通知功能","headline":"用樹莓派打造環境監測器[03]：程式讀取感測器讀數、通知功能","abstract":"以 Python 讀取溫濕度感測器、螢幕輸出、手機通知","inLanguage":"zh-tw","url":"https:\/\/torai55.github.io\/blog\/posts\/computer-science\/terrarium-sensor-03\/","author":{"@type":"Person","name":"Torai"},"copyrightYear":"2023","dateCreated":"2023-12-11T16:45:10\u002b08:00","datePublished":"2023-12-11T16:45:10\u002b08:00","dateModified":"2023-12-11T16:45:10\u002b08:00","keywords":["Raspberry Pi"],"mainEntityOfPage":"true","wordCount":"2370"}]</script><meta name=author content="Torai"><link href=https://github.com/torai55 rel=me><script src=/blog/lib/jquery/jquery.slim.min.js integrity></script>
<script defer src=/blog/lib/packery/packery.pkgd.min.js integrity></script><meta name=theme-color><script src=https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js></script>
<script src=https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js></script>
<script src=https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js></script>
<script>const firebaseConfig={apiKey:"AIzaSyDa7LdQcIND0_72KlxqeZx63_Z_XasPVIA",authDomain:"AIzaSyDa7LdQcIND0_72KlxqeZx63_Z_XasPVIA",projectId:"torai-s-garden",storageBucket:"torai-s-garden.appspot.com",messagingSenderId:"173578286860",appId:"1:173578286860:web:dfd43ba175d156118ebb29",measurementId:"G-8Z55J6813Y"};var app=firebase.initializeApp(firebaseConfig),db=firebase.firestore(),auth=firebase.auth()</script></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>快轉到主要內容</a></div><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/blog/ class="text-base font-medium text-gray-500 hover:text-gray-900">Torai&rsquo;s Garden</a></nav><nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12"><div><div class="cursor-pointer flex items-center nested-menu"><a href=/blog/posts/ class="text-base font-medium text-gray-500 hover:text-gray-900" title=Posts>Posts</a>
<span><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></div><div class="absolute menuhide"><div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl"><div class="flex flex-col space-y-3"><a href=/blog/categories/plants/ class="flex items-center"><p class="text-sm font-sm text-gray-500 hover:text-gray-900" title=Plants>Plants</p></a><a href=/blog/categories/computer-science/ class="flex items-center"><p class="text-sm font-sm text-gray-500 hover:text-gray-900" title="Computer Science">Computer Science</p></a></div></div></div></div><a href=/blog/tags/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title=Tags>Tags</p></a><a href=https://github.com/torai55/blog target=_blank class="flex items-center"><span><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span><p class="text-base font-medium text-gray-500 hover:text-gray-900" title></p></a><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400 h-12" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="ltr:mr-14 rtl:ml-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"><button id=appearance-switcher aria-label="Dark mode switcher" type=button><div class="flex items-center justify-center h-12 dark:hidden"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden h-12 dark:flex"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav><div class="flex md:hidden items-center space-x-5 md:ml-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button>
<button id=appearance-switcher-mobile aria-label="Dark mode switcher" type=button style=margin-right:5px><div class="flex items-center justify-center h-12 dark:hidden"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden h-12 dark:flex"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button for=menu-controller class=block><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=Posts>Posts</p><span><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></a></li><li class=mt-1><a href=/blog/categories/plants/ class="flex items-center"><p class="text-sm font-small text-gray-500 hover:text-gray-900" title=Plants>Plants</p></a></li><li class=mt-1><a href=/blog/categories/computer-science/ class="flex items-center"><p class="text-sm font-small text-gray-500 hover:text-gray-900" title="Computer Science">Computer Science</p></a></li><li class=mb-2></li><li class=mt-1><a href=/blog/tags/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=Tags>Tags</p></a></li><li class=mt-1><a href=https://github.com/torai55/blog target=_blank class="flex items-center"><div><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></div><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title></p></a></li></ul></div></label></div></div><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div id=hero class="h-[150px] md:h-[200px]"></div><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom" style=background-image:url(/blog/posts/computer-science/terrarium-sensor-03/featured.jpg)><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal"></div></div><div id=background-blur class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("background-blur");n.style.opacity=t/300})</script><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">用樹莓派打造環境監測器[03]：程式讀取感測器讀數、通知功能</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2023-12-11 16:45:10 +0800 +0800">2023 December 11 Mon</time><span class="px-2 text-primary-500">&#183;</span><span>2370 字</span><span class="px-2 text-primary-500">&#183;</span><span title=預計閱讀時間>5 分鐘</span><span class="px-2 text-primary-500">&#183;</span><span>
<span id=views_posts/computer-science/terrarium-sensor-03/index.md title=views>0</span>
<span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentcolor" d="M288 32c-80.8.0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7.0 24.6C17.3 304 48.6 356 95.4 399.4 142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7.0-24.6-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144 64.5-144 144-144 144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64-11.5.0-22.3-3-31.6-8.4-.2 2.8-.4 5.5-.4 8.4.0 53 43 96 96 96s96-43 96-96-43-96-96-96c-2.8.0-5.6.1-8.4.4 5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></span></span><span class="px-2 text-primary-500">&#183;</span><span>
<span id=likes_posts/computer-science/terrarium-sensor-03/index.md title=likes>0</span>
<span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M47.6 300.4 228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6.0 115.2.0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg></span></span></span><span class="px-2 text-primary-500">&#183;</span><span>
<button id=likes_button class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400" onclick=process_article()>
<span id=likes_button_heart style=display:none class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M47.6 300.4 228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6.0 115.2.0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg></span></span><span id=likes_button_emtpty_heart class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M244 84l11.1 12 12-11.98C300.6 51.37 347 36.51 392.6 44.1 461.5 55.58 512 115.2 512 185.1V190.9c0 41.5-17.2 81.2-47.6 109.5L283.7 469.1c-7.5 7-17.4 10.9-27.7 10.9S235.8 476.1 228.3 469.1L47.59 300.4C17.23 272.1.0 232.4.0 190.9V185.1c0-69.9 50.52-129.52 119.4-141 44.7-7.59 92 7.27 124.6 39.9C243.1 84 244 84.01 244 84zm11.1 79.9-45-46.8c-21.7-20.82-52.5-30.7-82.8-25.66C81.55 99.07 48 138.7 48 185.1V190.9c0 28.2 11.71 55.2 32.34 74.4L256 429.3l175.7-164c20.6-19.2 32.3-46.2 32.3-74.4V185.1c0-46.4-33.6-86.03-79.3-93.66C354.4 86.4 323.6 96.28 301.9 117.1l-46.8 46.8z"/></svg></span></span><span id=likes_button_text>&nbsp;Like</span></button></span></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/blog/categories/computer-science/","_self")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Computer Science</span></span></span>
<span style=margin-top:.5rem class=mr-2 onclick='window.open("/blog/tags/raspberry-pi/","_self")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Raspberry Pi</span></span></span></div></div><div class=flex><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 alt=Torai src=/blog/author_hub5bb614acb69d7d1e229299568e6f6f4_160331_192x192_fill_q90_box_smart1.jpeg><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">作者</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Torai</div><div class="text-sm text-neutral-700 dark:text-neutral-400">室內小園丁 ฅ^•ﻌ•^ฅ</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/torai55 target=_blank aria-label=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a></div></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first sm:max-w-prose lg:ml-auto px-0 lg:order-last lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10"><details open class="mt-0 overflow-auto h-[95vh] rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">目錄</summary><div class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#啟用-i2c-介面>啟用 I2C 介面</a></li><li><a href=#python-開發環境設定>Python 開發環境設定</a><ul><li><a href=#安裝-poetrypyenv>安裝 Poetry、pyenv</a></li><li><a href=#建立專案>建立專案</a></li><li><a href=#git-clone-已存在的專案>git clone 已存在的專案</a></li><li><a href=#其他指令>其他指令</a></li></ul></li><li><a href=#從-am2302-取得溫濕度紀錄>從 AM2302 取得溫濕度紀錄</a></li><li><a href=#從-gy30-取得光度紀錄>從 GY30 取得光度紀錄</a></li><li><a href=#控制-lcd-display>控制 LCD display</a></li><li><a href=#時間對溫濕度的紀錄圖>時間對溫濕度的紀錄圖</a></li><li><a href=#設定-crontab>設定 crontab</a></li><li><a href=#完成參考>完成參考</a></li><li><a href=#參考資料>參考資料</a></li></ul></nav></div></details><details class="mt-0 overflow-auto h-[95vh] rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">目錄</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#啟用-i2c-介面>啟用 I2C 介面</a></li><li><a href=#python-開發環境設定>Python 開發環境設定</a><ul><li><a href=#安裝-poetrypyenv>安裝 Poetry、pyenv</a></li><li><a href=#建立專案>建立專案</a></li><li><a href=#git-clone-已存在的專案>git clone 已存在的專案</a></li><li><a href=#其他指令>其他指令</a></li></ul></li><li><a href=#從-am2302-取得溫濕度紀錄>從 AM2302 取得溫濕度紀錄</a></li><li><a href=#從-gy30-取得光度紀錄>從 GY30 取得光度紀錄</a></li><li><a href=#控制-lcd-display>控制 LCD display</a></li><li><a href=#時間對溫濕度的紀錄圖>時間對溫濕度的紀錄圖</a></li><li><a href=#設定-crontab>設定 crontab</a></li><li><a href=#完成參考>完成參考</a></li><li><a href=#參考資料>參考資料</a></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-fit"><details style=margin-left:0 class="mt-2 mb-5 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5"><summary class="py-1 text-lg font-semibold cursor-pointer bg-primary-200 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-primary-800 dark:text-neutral-100">Terrarium Sensor - This article is part of a series.</summary><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=https://torai55.github.io/blog/posts/computer-science/terrarium-sensor-01/>Part 1: 用樹莓派打造環境監測器[01]：樹莓派的硬體們</a></div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=https://torai55.github.io/blog/posts/computer-science/terrarium-sensor-02/>Part 2: 用樹莓派打造環境監測器[02]：無頭樹莓派，啟動</a></div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">Part 3: This Article</div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=https://torai55.github.io/blog/posts/computer-science/terrarium-sensor-04/>Part 4: 用樹莓派打造環境監測器[04]：遺珠之憾系列</a></div></details><div class="max-w-prose mb-20"><div id=啟用-i2c-介面 class=anchor></div><h2 class="relative group">啟用 I2C 介面
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%95%9f%e7%94%a8-i2c-%e4%bb%8b%e9%9d%a2 aria-label=定位點>#</a></span></h2><p>樹莓派預設不啟用，但感光器和螢幕都會用到，需要先手動啟用。</p><p><code>$ sudo raspi-config</code> 打開樹莓派系統設定 GUI，並參照下圖打開 I2C。</p><div id=gallery-0><img src=./images/rc_cmd_main_interfacing.png class=grid-w50>
<img src=./images/rc_cmd_interfacing_i2c.png class=grid-w50></div><script>$(window).on("load",function(){$("#gallery-0").packery({percentPosition:!0,gutter:5,resize:!0})})</script><p>啟用後透過 <code>$ ls /dev/i2c*</code>，可發現 <code>/dev</code> 下多了兩個設備。</p><p><code>$ sudo i2cdetect -y 0</code> 或 <code>$ sudo i2cdetect -y 1</code>：檢查在 I2C bus 上設備的位址，Rev 1 的 I2C bus 是使用 i2c-0；Rev 2 則是 i2c-1。</p><div id=python-開發環境設定 class=anchor></div><h2 class="relative group">Python 開發環境設定
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#python-%e9%96%8b%e7%99%bc%e7%92%b0%e5%a2%83%e8%a8%ad%e5%ae%9a aria-label=定位點>#</a></span></h2><p>考慮到一台電腦內可能需要執行許多專案，專案所需的套件、套件版本、python 本身的版本都不盡相同。<br>若想要有便於管理的環境，最需要的工具有：</p><ol><li>程式碼版本控制：使用 git，在安裝樹莓派作業系統時已經有內建</li><li>套件安裝的虛擬環境管理：Poetry</li><li>套件相依性管理：Poetry</li><li>Python 本身的版本管理：pyenv</li></ol><div id=安裝-poetrypyenv class=anchor></div><h3 class="relative group">安裝 Poetry、pyenv
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%ae%89%e8%a3%9d-poetrypyenv aria-label=定位點>#</a></span></h3><p>先跟著 <a href=https://blog.kyomind.tw/linux-dev-setup/ target=_blank>部落格文章</a> 第三、四章節安裝 Poetry + pyenv</p><div class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"><span class="text-primary-400 ltr:pr-3 rtl:pl-3 flex items-center"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentcolor" d="M172.5 131.1c55.6-55.59 148-55.59 203.6.0 50 50 57.4 129.7 16.3 187.2L391.3 319.9C381 334.2 361 337.6 346.7 327.3c-14.4-10.3-17.8-30.3-7.5-44.6L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2c-31.4-31.4-82.5-31.4-114 0L105.5 289.5c-31.51 30.6-31.51 82.5.0 114C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4 265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2c-58.4 41.1-136.3 34.5-186.29-15.4-56.469-56.5-56.469-148.1.0-204.5L172.5 131.1zM467.5 380c-56.5 56.5-148 56.5-204.5.0-50-50-56.5-128.8-15.4-186.3L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7 307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8c31.4 31.4 82.5 31.4 114 0L534.5 222.5c31.5-31.5 31.5-83.4.0-114C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58 374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24c56.5 56.46 56.5 148.06.0 204.46L467.5 380z"/></svg></span></span><span class=dark:text-neutral-300><p>延伸閱讀。選用 Poetry 的原因、使用相關的文章可以參考：</p><ul><li><a href=https://blog.kyomind.tw/poetry-pyenv-practical-tips/#Poetry-%E8%88%87-pyenv-%E7%9A%84%E9%83%A8%E5%88%86%E5%8A%9F%E8%83%BD%E9%87%8D%E7%96%8A target=_blank>Poetry + pyenv 指令</a></li><li><a href=https://blog.kyomind.tw/python-poetry/ target=_blank>選用 Poetry 的原因</a></li></ul></span></div><div id=建立專案 class=anchor></div><h3 class="relative group">建立專案
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%bb%ba%e7%ab%8b%e5%b0%88%e6%a1%88 aria-label=定位點>#</a></span></h3><p>跟著上述文章步驟安裝完後，執行 <code>$ pyenv --version</code>、<code>$ poetry --version</code> 確認是否安裝成功。</p><p>安裝成功後，照順序執行以下指令建立專案：</p><ol><li><code>$ mkdir &lt;project-name></code>：建立專案資料夾</li><li><code>$ cd ./&lt;project-name></code>：移動到資料夾內</li><li><code>$ git init</code>：初始化 git</li><li><code>$ pyenv install 3.10.10</code>：安裝特定版本 python 到此電腦內，若已經透過 pyenv 安裝過則可省略此指令</li><li><code>$ pyenv local 3.10.10</code>：指定 pyenv 以後在此資料夾內自動使用 3.10.10 的 python</li><li><code>$ poetry init</code>：初始化 poetry，建立 <code>pyproject.toml</code></li><li>修改 <code>pyproject.toml</code>：將 <code>[tool.poetry.dependencies]</code> 的 python 版本指定為 <code>^3.10.10</code></li><li><code>$ poetry env use 3.10.10</code>：使 poetry 建立 3.10.10 的虛擬環境，相關內容在 <code>.venv</code> 資料夾內</li></ol><p>執行完以上指令後，就能以 3.10.10 版本的 python 進行開發。<br>若是在自己電腦上開發，可以把程式碼 push 到 github 之後在樹莓派 pull 下來執行。<br>或是透過 SFTP 將整個專案資料夾直接傳到樹莓派內。<br>也可以透過 VS Code 的 Remote SSH 套件編輯樹莓派上的檔案。</p><div id=git-clone-已存在的專案 class=anchor></div><h3 class="relative group">git clone 已存在的專案
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#git-clone-%e5%b7%b2%e5%ad%98%e5%9c%a8%e7%9a%84%e5%b0%88%e6%a1%88 aria-label=定位點>#</a></span></h3><p>若是 <code>$ git clone</code> 已存在的專案，則只需要建立虛擬環境並安裝套件：</p><ol><li><code>$ git clone &lt;project-url></code>：使用 git 複製專案到本地</li><li><code>$ cd &lt;project-name></code>：進入專案資料夾</li><li><code>$ pyenv install 3.10.10</code>：安裝特定版本 python 到此電腦內，若已經透過 pyenv 安裝過則可省略此指令</li><li><code>$ pyenv local 3.10.10</code>：指定 pyenv 以後在此資料夾內自動使用 3.10.10 的 python</li><li><code>$ poetry env use 3.10.10</code>：使 poetry 建立 3.10.10 的虛擬環境，相關內容在 <code>.venv</code> 資料夾內</li><li><code>$ poetry shell</code>：進入虛擬環境</li><li><code>$ poetry install</code>：使 poetry 安裝套件</li></ol><div id=其他指令 class=anchor></div><h3 class="relative group">其他指令
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%85%b6%e4%bb%96%e6%8c%87%e4%bb%a4 aria-label=定位點>#</a></span></h3><ul><li><code>$ poetry shell</code>：進入虛擬環境，進入後才能使用 poetry 新增、移除套件，要離開則是輸入 <code>$ exit</code></li><li><code>$ poetry add &lt;module-name></code>：新增套件</li><li><code>$ poetry remove &lt;module-name></code>：移除套件</li><li><code>$ poetry show --tree</code>：列出安裝的套件</li><li><code>$ pyenv versions</code>：列出已安裝的 python 版本</li><li><code>$ pyenv local</code>：顯示目前專案使用的 python 版本</li><li><code>$ pyenv global</code>：顯示目前全域使用的 python 版本</li></ul><div id=從-am2302-取得溫濕度紀錄 class=anchor></div><h2 class="relative group">從 AM2302 取得溫濕度紀錄
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%be%9e-am2302-%e5%8f%96%e5%be%97%e6%ba%ab%e6%bf%95%e5%ba%a6%e7%b4%80%e9%8c%84 aria-label=定位點>#</a></span></h2><p>使用 <a href=https://pypi.org/project/adafruit-circuitpython-dht/ target=_blank>adafruit-circuitpython-dht</a> 套件。</p><ol><li><code>$ sudo apt-get install libgpiod2</code>：安裝 <code>adafruit-circuitpython-dht</code> 套件的依賴</li><li>在專案資料夾內 <code>$ poetry shell</code>：進入虛擬環境</li><li><code>$ poetry add adafruit-circuitpython-dht</code>：安裝需要的套件</li><li>新增 <code>dht22_demo.py</code>，取得溫濕度：<br>完整程式碼可參考 <a href=https://github.com/torai55/terrarium-sensor target=_blank>Github Repo</a></li></ol><p>使用的是 <a href=https://pinout.xyz/ target=_blank>BCM 腳位</a>，而不是實體腳位。<br>例如我使用的 GPIO 6 對應的實體腳位是 31。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>dhtDevice</span> <span class=o>=</span> <span class=n>adafruit_dht</span><span class=o>.</span><span class=n>DHT22</span><span class=p>(</span><span class=n>board</span><span class=o>.</span><span class=n>D6</span><span class=p>)</span> <span class=c1># 使用 BCM 腳位</span>
</span></span><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>temperatureC</span> <span class=o>=</span> <span class=n>dhtDevice</span><span class=o>.</span><span class=n>temperature</span>
</span></span><span class=line><span class=cl>    <span class=n>temperatureF</span> <span class=o>=</span> <span class=n>temperatureC</span> <span class=o>*</span> <span class=p>(</span><span class=mi>9</span> <span class=o>/</span> <span class=mi>5</span><span class=p>)</span> <span class=o>+</span> <span class=mi>32</span>
</span></span><span class=line><span class=cl>    <span class=n>humidity</span> <span class=o>=</span> <span class=n>dhtDevice</span><span class=o>.</span><span class=n>humidity</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Temp: </span><span class=si>{:.1f}</span><span class=s2> F / </span><span class=si>{:.1f}</span><span class=s2> C    Humidity: </span><span class=si>{}</span><span class=s2>% &#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>temperatureF</span><span class=p>,</span> <span class=n>temperatureC</span><span class=p>,</span> <span class=n>humidity</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=ne>RuntimeError</span> <span class=k>as</span> <span class=n>error</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># DHT22 很容易噴各種錯誤，發生錯誤時過一段時間再重試即可</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>error</span><span class=o>.</span><span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>dhtDevice</span><span class=o>.</span><span class=n>exit</span><span class=p>()</span>
</span></span></code></pre></div><ol start=5><li>在虛擬環境下，執行 <code>$ python dht22_demo.py</code> 就會在終端顯示溫濕度</li></ol><div id=從-gy30-取得光度紀錄 class=anchor></div><h2 class="relative group">從 GY30 取得光度紀錄
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%be%9e-gy30-%e5%8f%96%e5%be%97%e5%85%89%e5%ba%a6%e7%b4%80%e9%8c%84 aria-label=定位點>#</a></span></h2><ol><li>在專案資料夾內 <code>$ poetry shell</code>：進入虛擬環境</li><li><code>$ poetry add smbus2 RPi.GPIO</code>：安裝需要的套件</li><li>新增 <code>bh1750_demo.py</code>，取得溫濕度：<br>完整程式碼可參考 <a href=https://github.com/torai55/terrarium-sensor target=_blank>Github Repo</a></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>BH1750</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 參考下面註腳圖一</span>
</span></span><span class=line><span class=cl>        <span class=c1># 預設 I2C 位址</span>
</span></span><span class=line><span class=cl>        <span class=c1># ADDR 腳位在低電位時是 0x23</span>
</span></span><span class=line><span class=cl>        <span class=c1># 高電位時是 0x5C</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>DEVICE</span>      <span class=o>=</span> <span class=mh>0x23</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># 參考下面註腳圖二</span>
</span></span><span class=line><span class=cl>        <span class=c1># 想要讀取的 bh1750 register 地址</span>
</span></span><span class=line><span class=cl>        <span class=c1># 不同地址有不同解析度</span>
</span></span><span class=line><span class=cl>        <span class=c1># 在讀取後會設定成 Power Down mode</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>ONE_TIME_HIGH_RES_MODE_1</span> <span class=o>=</span> <span class=mh>0x20</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># 參考下面註腳圖三</span>
</span></span><span class=line><span class=cl>    <span class=c1># 感測器採取 Big-Endian，最高有效位數放在記憶體最低位 data[0]</span>
</span></span><span class=line><span class=cl>    <span class=c1># 將高位數字乘以 256，可以當作位元運算，將高位數左移八位</span>
</span></span><span class=line><span class=cl>    <span class=c1># 除以 1.2 是感測器設定的 Measurement Accuracy</span>
</span></span><span class=line><span class=cl>    <span class=c1># 若使用解析度為 0.5 lx 的模式</span>
</span></span><span class=line><span class=cl>    <span class=c1># 最低有效位數代表的是 2^-1，算法就會不一樣</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>convertToNumber</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span><span class=o>=</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=p>(</span><span class=mi>256</span> <span class=o>*</span> <span class=n>data</span><span class=p>[</span><span class=mi>0</span><span class=p>]))</span> <span class=o>/</span> <span class=mf>1.2</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># 從 I2C bus 讀取 16 bit 的數據</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>readLight</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>addr</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>addr</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>addr</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>DEVICE</span>
</span></span><span class=line><span class=cl>        <span class=c1># read_i2c_block_data(i2c_addr, register, length)</span>
</span></span><span class=line><span class=cl>        <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>bus</span><span class=o>.</span><span class=n>read_i2c_block_data</span><span class=p>(</span><span class=n>addr</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>ONE_TIME_HIGH_RES_MODE_1</span><span class=p>,</span> <span class=mi>16</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>convertToNumber</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>destroy</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=n>GPIO</span><span class=o>.</span><span class=n>cleanup</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bh1750</span> <span class=o>=</span> <span class=n>BH1750</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>lightLevel</span> <span class=o>=</span> <span class=n>bh1750</span><span class=o>.</span><span class=n>readLight</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;BH1750 Light Level :&#34;</span> <span class=o>+</span> <span class=nb>format</span><span class=p>(</span><span class=n>lightLevel</span><span class=p>,</span> <span class=s1>&#39;.2f&#39;</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&#34;lx&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>bh1750</span><span class=o>.</span><span class=n>destroy</span><span class=p>()</span>
</span></span></code></pre></div><ol start=4><li>在虛擬環境下，執行 <code>$ python bh1750_demo.py</code> 就會在終端顯示光度</li></ol><p>圖一、BH1750 在 I2C bus 上的位址 <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup><br>圖二、BH1750 register 位址 <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup><br>圖三、BH1750 高解析度模式 <sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup></p><div id=控制-lcd-display class=anchor></div><h2 class="relative group">控制 LCD display
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e6%8e%a7%e5%88%b6-lcd-display aria-label=定位點>#</a></span></h2><ol><li>在專案資料夾內 <code>$ poetry shell</code>：進入虛擬環境</li><li><code>$ poetry add RPLCD</code>：安裝需要的套件</li><li>新增 <code>lcd_demo.py</code>，控制螢幕顯示：<br>完整程式碼可參考 <a href=https://github.com/torai55/terrarium-sensor target=_blank>Github Repo</a></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>lcd</span> <span class=o>=</span> <span class=n>i2c</span><span class=o>.</span><span class=n>CharLCD</span><span class=p>(</span><span class=s1>&#39;PCF8574&#39;</span><span class=p>,</span> <span class=mh>0x27</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>charmap</span><span class=o>=</span><span class=s1>&#39;A00&#39;</span><span class=p>,</span> <span class=n>cols</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span> <span class=n>rows</span><span class=o>=</span><span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>lcd</span><span class=o>.</span><span class=n>write_string</span><span class=p>(</span><span class=s1>&#39;Hello world&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>lcd</span><span class=o>.</span><span class=n>crlf</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>lcd</span><span class=o>.</span><span class=n>write_string</span><span class=p>(</span><span class=s1>&#39;IoT with Torai&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>lcd</span><span class=o>.</span><span class=n>crlf</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>lcd</span><span class=o>.</span><span class=n>write_string</span><span class=p>(</span><span class=s1>&#39;Raspberry Pi&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sleep</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>lcd</span><span class=o>.</span><span class=n>backlight_enabled</span> <span class=o>=</span> <span class=kc>False</span> 
</span></span><span class=line><span class=cl><span class=n>lcd</span><span class=o>.</span><span class=n>close</span><span class=p>(</span><span class=n>clear</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span></code></pre></div><ol start=4><li>在虛擬環境下，執行 <code>$ python lcd_demo.py</code> 就會在螢幕顯示訊息</li></ol><div id=時間對溫濕度的紀錄圖 class=anchor></div><h2 class="relative group">時間對溫濕度的紀錄圖
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e6%99%82%e9%96%93%e5%b0%8d%e6%ba%ab%e6%bf%95%e5%ba%a6%e7%9a%84%e7%b4%80%e9%8c%84%e5%9c%96 aria-label=定位點>#</a></span></h2><p>將資料上傳到 <a href=https://thingspeak.com/ target=_blank>ThingSpeak</a>，可以在網頁上瀏覽他們的圖表。<br>apiKey 是比較私密的資料，透過 dotfile 來存取。<br>也要設定 <code>.gitignore</code> 避免被 git 記住。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>apiKey</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s1>&#39;THING_SPEAK_API_KEY&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>temp</span> <span class=o>=</span> <span class=s2>&#34;26 C&#34;</span>
</span></span><span class=line><span class=cl><span class=n>humidity</span> <span class=o>=</span> <span class=s2>&#34;15 %&#34;</span>
</span></span><span class=line><span class=cl><span class=n>lightLevel</span> <span class=o>=</span> <span class=s2>&#34;1500 lux&#34;</span>
</span></span><span class=line><span class=cl><span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;https://api.thingspeak.com/update?api_key=</span><span class=si>{</span><span class=n>apiKey</span><span class=si>}</span><span class=s2>&amp;field1=</span><span class=si>{</span><span class=n>temp</span><span class=si>}</span><span class=s2>&amp;field2=</span><span class=si>{</span><span class=n>humidity</span><span class=si>}</span><span class=s2>&amp;field3=</span><span class=si>{</span><span class=n>lightLevel</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></div><div id=設定-crontab class=anchor></div><h2 class="relative group">設定 crontab
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e8%a8%ad%e5%ae%9a-crontab aria-label=定位點>#</a></span></h2><p>設定每 15 分鐘執行一次</p><ol><li><code>$ crontab -e</code>：編輯自己的 crontab</li><li>在檔案最後加入 <code>*/15 * * * * /path/to/virtual/env/.venv/bin/python /path/to/terrarium-sensor/main.py</code></li></ol><ul><li><code>$ crontab -l</code>：查看自己的 crontab</li><li><code>$ grep -i cron /var/log/syslog</code>：可查看 crontab 執行紀錄</li></ul><div id=完成參考 class=anchor></div><h2 class="relative group">完成參考
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%ae%8c%e6%88%90%e5%8f%83%e8%80%83 aria-label=定位點>#</a></span></h2><div id=gallery-2><img src=./images/result_1.jpg class=grid-w45>
<img src=./images/result_2.png class=grid-w55></div><script>$(window).on("load",function(){$("#gallery-2").packery({percentPosition:!0,gutter:5,resize:!0})})</script><div id=參考資料 class=anchor></div><h2 class="relative group">參考資料
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%e5%8f%83%e8%80%83%e8%b3%87%e6%96%99 aria-label=定位點>#</a></span></h2><ul><li><a href=https://blog.kyomind.tw/python-poetry/ target=_blank>最佳 Python 套件管理器——Poetry 完全入門指南</a></li><li><a href=https://learn.adafruit.com/dht-humidity-sensing-on-raspberry-pi-with-gdocs-logging/python-setup target=_blank>DHT Humidity Sensing on Raspberry Pi or Beaglebone Black with GDocs Logging</a></li><li><a href=https://coldnew.github.io/f0528f55/ target=_blank>讓你的 Raspberry Pi 透過 I²C 讀取 eeprom</a></li><li><a href=https://www.mouser.com/datasheet/2/348/bh1750fvi-e-186247.pdf target=_blank>Digital 16bit Serial Output Type Ambient Light Sensor IC</a></li><li><a href=https://zhuanlan.zhihu.com/p/649302435 target=_blank>Create pi底板系列：数字光强度传感器模块.No7</a></li><li><a href=https://blog.gtwang.org/programming/difference-between-big-endian-and-little-endian-implementation-in-c/ target=_blank>Big-Endian 與 Little-Endian 的差異與判斷程式碼</a></li><li><a href=https://smbus2.readthedocs.io/en/latest/ target=_blank>smbus2 readthedocs</a></li><li><a href=https://blog.gtwang.org/programming/difference-between-big-endian-and-little-endian-implementation-in-c/ target=_blank>Big-Endian 與 Little-Endian 的差異與判斷程式碼</a></li><li><a href=https://phppot.com/web/guide-to-setup-raspberry-pi-with-lcd-display-using-i2c-backpack/ target=_blank>Guide to Setup Raspberry Pi with LCD Display using I2C Backpack</a></li><li><a href=https://circuitdigest.com/microcontroller-projects/interfacing-lcd-with-raspberry-pi-4-to-create-custom-character-and-scrolling-text target=_blank>Interfacing 20x4 LCD with Raspberry Pi 4 for Creating Custom Character and Scrolling Text</a></li><li><a href=https://rplcd.readthedocs.io/en/stable/api.html target=_blank>RPLCD readthedocs</a></li><li><a href=https://blog.gtwang.org/linux/linux-crontab-cron-job-tutorial-and-examples/ target=_blank>Linux 設定 crontab 例行性工作排程教學與範例</a></li><li><a href=https://stackoverflow.com/questions/4150671/how-to-set-virtualenv-for-a-crontab target=_blank>How to set virtualenv for a crontab?</a></li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><figure><img class="my-0 rounded-md" src=./images/BH1750_addr.png alt="bh1750 addr"><figcaption>圖一、BH1750 在 I2C bus 上的位址。來源：<a href=https://www.mouser.com/datasheet/2/348/bh1750fvi-e-186247.pdf target=_blank>
Digital 16bit Serial Output Type Ambient Light Sensor IC</a></figcaption></figure>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><figure><img class="my-0 rounded-md" src=./images/BH1750_Instruction_set.png alt="bh1750 instruction set"><figcaption>圖二、BH1750 register 位址。來源：<a href=https://www.mouser.com/datasheet/2/348/bh1750fvi-e-186247.pdf target=_blank>
Digital 16bit Serial Output Type Ambient Light Sensor IC</a></figcaption></figure>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><figure><img class="my-0 rounded-md" src=./images/BH1750_high_res_mode.png alt="bh1750 high res mode"><figcaption>圖三、BH1750 高解析度模式。來源：<a href=https://www.mouser.com/datasheet/2/348/bh1750fvi-e-186247.pdf target=_blank>
Digital 16bit Serial Output Type Ambient Light Sensor IC</a></figcaption></figure>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><details style=margin-left:0 class="mt-2 mb-5 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5"><summary class="py-1 text-lg font-semibold cursor-pointer bg-primary-200 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-primary-800 dark:text-neutral-100">Terrarium Sensor - This article is part of a series.</summary><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=https://torai55.github.io/blog/posts/computer-science/terrarium-sensor-01/>Part 1: 用樹莓派打造環境監測器[01]：樹莓派的硬體們</a></div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=https://torai55.github.io/blog/posts/computer-science/terrarium-sensor-02/>Part 2: 用樹莓派打造環境監測器[02]：無頭樹莓派，啟動</a></div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">Part 3: This Article</div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=https://torai55.github.io/blog/posts/computer-science/terrarium-sensor-04/>Part 4: 用樹莓派打造環境監測器[04]：遺珠之憾系列</a></div></details></div><script>var oid="views_posts/computer-science/terrarium-sensor-03/index.md",oid_likes="likes_posts/computer-science/terrarium-sensor-03/index.md"</script><script type=text/javascript src=/blog/js/page.min.0e49973b4ad0a382c7c6012d8bff8226316642daabc4f8a20477bd08674f3da6e2fa993bc20ad4f51e7c5bb68e6f913a207a7c4fe37ea0e7b806894afce0a64e.js integrity="sha512-DkmXO0rQo4LHxgEti/+CJjFmQtqrxPiiBHe9CGdPPabi+pk7wgrU9R58W7aOb5E6IHp8T+N+oOe4BolK/OCmTg=="></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/blog/posts/computer-science/terrarium-sensor-02/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">用樹莓派打造環境監測器[02]：無頭樹莓派，啟動</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2023-12-11 16:42:52 +0800 +0800">2023 December 11 Mon</time></span></span></a></span>
<span><a class="flex text-right group ml-3" href=/blog/posts/computer-science/terrarium-sensor-04/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">用樹莓派打造環境監測器[04]：遺珠之憾系列</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2023-12-11 16:48:07 +0800 +0800">2023 December 11 Mon</time></span></span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div><div class=pt-3><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class=pt-3><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//blog-5ydjf8iprb.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label=捲動到頁頂 title=捲動到頁頂>&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2023
Torai</p><p class="text-xs text-neutral-500 dark:text-neutral-400">以 <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a> 製作</p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/blog/js/process.min.35c1113bcc16c5a59bf031082f9e63822aa95280423881a7847a7ff33a16e6299ce6a840d9ef4e10d947e030a18f3f20359afb2ec0f35967484b9a9360ac3145.js integrity="sha512-NcERO8wWxaWb8DEIL55jgiqpUoBCOIGnhHp/8zoW5imc5qhA2e9OENlH4DChjz8gNZr7LsDzWWdIS5qTYKwxRQ=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://torai55.github.io/blog/ style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=搜尋 tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="關閉 (Esc)">
<span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>